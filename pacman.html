<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pac-Man</title>
    <link rel="shortcut icon" href="pac-favicon.png">
    <style>
        body {
            background-color: #292929;
            user-select: none; /* 禁止選取文字 */
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        .wrapper {
            width: 960px;
            margin: 0 auto;
            text-align: center;
            color: #999;
        }
        canvas {
            display: block;
            background: #000;
        }
        .controls {
            position: fixed;
            bottom: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }
        .arrow-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            position: absolute;
            right: 20px;
            bottom: 20px;
        }
        .button {
            width: 80px;
            height: 80px;
            background-color: #999;
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 36px;
            cursor: pointer;
            user-select: none;
        }
        .button:active {
            background-color: orange;
        }
        .directional-buttons {
            display: grid;
            grid-template-areas:
                ". up ."
                "left . right"
                ". down .";
            gap: 10px;
            margin-right: 20px;
        }
        .directional-buttons button {
            width: 80px;
            height: 80px;
            font-size: 32px;
        }
        .spacebar-button {
            position: absolute;
            left: 20px;
            bottom: 20px;
            width: 120px;
            height: 120px;
            background-color: #999;
            border-radius: 50%;
            font-size: 36px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }
        .spacebar-button:active {
            background-color: orange;
        }
    </style>
</head>
<body>

<div class="wrapper">
    <canvas id="canvas" width="960" height="640">瀏覽器不支持html5語法</canvas>
    <p>電腦操作：按［空格］開始與暫停，方向鍵操控</p>
    <p>手機操作：按 ［o］按鍵 開始與暫停，十字按鍵操控 </p>
</div>

<div class="controls">
    <div class="arrow-buttons">
        <div class="directional-buttons">
            <button class="button" id="up-btn">▲</button>
            <button class="button" id="left-btn">◀</button>
            <button class="button" id="right-btn">▶</button>
            <button class="button" id="down-btn">▼</button>
        </div>
    </div>
    <div class="spacebar-button" id="spacebar-btn">o</div>
</div>

<script src="game.js"></script>
<script src="index.js"></script>

<script>
    let upPressed = false;
    let downPressed = false;
    let leftPressed = false;
    let rightPressed = false;
    let spacebarPressed = false;

    // 方向鍵事件處理
    document.getElementById('up-btn').addEventListener('touchstart', function () {
        upPressed = true;
        console.log('Up pressed');
    });
    document.getElementById('up-btn').addEventListener('touchend', function () {
        upPressed = false;
        console.log('Up released');
    });

    document.getElementById('down-btn').addEventListener('touchstart', function () {
        downPressed = true;
        console.log('Down pressed');
    });
    document.getElementById('down-btn').addEventListener('touchend', function () {
        downPressed = false;
        console.log('Down released');
    });

    document.getElementById('left-btn').addEventListener('touchstart', function () {
        leftPressed = true;
        console.log('Left pressed');
    });
    document.getElementById('left-btn').addEventListener('touchend', function () {
        leftPressed = false;
        console.log('Left released');
    });

    document.getElementById('right-btn').addEventListener('touchstart', function () {
        rightPressed = true;
        console.log('Right pressed');
    });
    document.getElementById('right-btn').addEventListener('touchend', function () {
        rightPressed = false;
        console.log('Right released');
    });

    // 空白鍵事件處理
    document.getElementById('spacebar-btn').addEventListener('touchstart', function () {
        if (!spacebarPressed) {  // 每次按一次只輸出一次
            spacebarPressed = true;
            console.log('Spacebar pressed');
            // 模擬按下空白鍵
            // 在這裡加入你需要空白鍵發出的遊戲操作邏輯
            setTimeout(function () {
                spacebarPressed = false;
            }, 200);  // 給空白鍵一個短暫的時間重置狀態
        }
    });
</script>

</body>
</html>
